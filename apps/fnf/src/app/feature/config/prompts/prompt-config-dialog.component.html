<h2 mat-dialog-title>
  Edit Prompt Configuration
  @if (selectedPrompt) {
    <span class="prompt-type-label">
      @if (selectedPrompt.custom) {
        (Custom)
      } @else {
        (Pre-Defined)
      }
    </span>
  }
</h2>

<div class="title-bar no-subscript-wrapper">
  <mat-form-field
      appearance="outline"
      style="width: 250px;">
    <mat-label>Prompt</mat-label>
    <mat-select
        [(value)]="selectedPrompt"
        (selectionChange)="onPromptChange($event)">
      <mat-optgroup label="Custom Prompts">
        @for (prompt of customPrompts; track prompt.name) {
          <mat-option [value]="prompt">{{ prompt.name }}</mat-option>
        }
      </mat-optgroup>
      <mat-optgroup label="Predefined Prompts">
        @for (prompt of predefinedPrompts; track prompt.name) {
          <mat-option [value]="prompt">{{ prompt.name }}</mat-option>
        }
      </mat-optgroup>
    </mat-select>
  </mat-form-field>
  <button
      mat-icon-button
      color="warn"
      [disabled]="!isResetEnabled()"
      (click)="onResetToDefaults()"
      title="Reset to defaults">
    <mat-icon>restore</mat-icon>
  </button>
</div>

<mat-dialog-content style="padding-right: 0;">
  <app-fnf-editor
      [options]="editorOptions"
      [(text)]="editorText"
      (textChange)="onEditorChange($event)"></app-fnf-editor>
</mat-dialog-content>

<mat-dialog-actions>
  <button
      mat-raised-button
      [disabled]="!isResetEnabled()"
      (click)="onResetToDefaults()">Reset
  </button>
  <div>
    @if (!isValidYaml) {
      <span class="validation">
        <mat-icon color="warn">error</mat-icon>
      </span><span>YAML is invalid. Please correct errors to enable Save.</span>
    }
  </div>
  <button
      mat-raised-button
      (click)="onCancel()">Cancel
  </button>
  <button
      mat-raised-button
      color="primary"
      [disabled]="!canSave"
      (click)="onSave()">Save
  </button>
</mat-dialog-actions>