<h2 mat-dialog-title>Color Transform</h2>

<mat-dialog-content class="overflow-x-clip">

  <div class="section">
    <div class="label-slider">
      <mat-label>Brighter/Darker: {{ lightnessDelta }}%</mat-label>
      <mat-slider
          [discrete]="true"
          [max]="100"
          [min]="-100"
          [showTickMarks]="true"
          [step]="1">
        <input
            (ngModelChange)="recompute()"
            [(ngModel)]="lightnessDelta"
            matSliderThumb/>
      </mat-slider>
    </div>
  </div>

  <div class="section">
    <div class="label-slider">
      <mat-label>Transparency: {{ transparency }}%</mat-label>
      <mat-slider
          [discrete]="true"
          [max]="100"
          [min]="0"
          [showTickMarks]="true"
          [step]="1">
        <input
            (ngModelChange)="recompute()"
            [(ngModel)]="transparency"
            matSliderThumb/>
      </mat-slider>
    </div>
  </div>

  <div class="section">
    <div class="row">
      <mat-form-field appearance="outline">
        <mat-label>Mode</mat-label>
        <mat-select
            (ngModelChange)="recompute()"
            [(ngModel)]="mergeMode">
          <mat-option value="alpha">alpha</mat-option>
          <mat-option value="additive">additive</mat-option>
          <mat-option value="average">average</mat-option>
        </mat-select>
      </mat-form-field>
      <mat-form-field appearance="outline">
        <mat-label>Merge color</mat-label>
        <input
            (ngModelChange)="recompute()"
            [(ngModel)]="mergeColor"
            matInput
            placeholder="#rrggbb or rgb() or hsl() or name"/>
      </mat-form-field>
      <input
          (ngModelChange)="recompute()"
          [(ngModel)]="mergeColor"
          class="native-color"
          type="color"/>
    </div>

    <div class="label-slider">
      <mat-label>Merge Ratio: {{ mergeRatio | number:'1.0-2' }}</mat-label>
      <mat-slider
          [max]="1"
          [min]="0"
          [step]="0.01">
        <input
            (ngModelChange)="recompute()"
            [(ngModel)]="mergeRatio"
            matSliderThumb/>
      </mat-slider>
    </div>
  </div>

  <div class="section">
    <div class="row">
      <mat-form-field appearance="outline">
        <mat-label>Blend color</mat-label>
        <input
            (ngModelChange)="recompute()"
            [(ngModel)]="blendColor"
            matInput
            placeholder="#rrggbb or rgb() or hsl() or name"/>
      </mat-form-field>
      <input
          (ngModelChange)="recompute()"
          [(ngModel)]="blendColor"
          class="native-color"
          type="color"/>
    </div>

    <div class="label-slider">
      <mat-label>Blend Alpha: {{ blendAlpha | number:'1.0-2' }}</mat-label>
      <mat-slider
          [max]="1"
          [min]="0"
          [step]="0.01">
        <input
            (ngModelChange)="recompute()"
            [(ngModel)]="blendAlpha"
            matSliderThumb/>
      </mat-slider>
    </div>
  </div>

  <div class="section">
    <div class="row action-row">
      <button
          (click)="applyInvert()"
          color="primary"
          mat-raised-button>
        <mat-icon>invert_colors</mat-icon>
        Invert
      </button>
      <div><!-- stretch --></div>
      <button
          (click)="onReset()"
          mat-button>
        <mat-icon>restart_alt</mat-icon>
        Reset
      </button>
    </div>
  </div>


  <div class="section">
    <div class="preview-row">
      @for (r of originalRows; track r.key; let i = $index) {
        <div>
          <div
              class="swatch"
              [style.background-color]="r.value"></div>
          <div class="value">{{ originalRows[i].value }}</div>
        </div><span class="arrow">â†’</span>
        <div>
          <div
              class="swatch"
              [style.background-color]="workingRows[i].value"></div>
          <div class="value">{{ workingRows[i].value }}</div>
        </div>
      }
    </div>
  </div>

</mat-dialog-content>

