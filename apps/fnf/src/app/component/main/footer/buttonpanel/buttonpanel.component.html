<div class="button-panel-container">
  <div class="button-panel">

    @for (button of buttons; track button) {
      <button
          (click)="onButtonClick(button.action)"
          [disabled]="!buttonEnableStates[button.action]"
          class="panel-button"
          color="primary"
          mat-stroked-button>

        @if (button.shortcut) {
          <b
              [innerText]="button.shortcut"
              class="fnf-shortcut"></b>
        }

        @if (button.icon) {
          <mat-icon [innerText]="button.icon"></mat-icon>
        }

        @if (button.label) {
          <span>&nbsp;{{ button.label }}</span>
        }

      </button>
    }




    <button
        [matMenuTriggerFor]="menuAction"
        class="panel-button row-reverse"
        mat-stroked-button>
      Actions
      <mat-icon>keyboard_arrow_up</mat-icon>
    </button>
    <mat-menu #menuAction="matMenu">

      <div class="menu-container">
        <div>
          <mat-list>
            @for (id of menuItems0; track id) {
              @if (id === '-') {
                <mat-divider></mat-divider>
              } @else {

                <button
                    (click)="triggerAction(id)"
                    mat-menu-item>
                  {{ getLabelByAction(id) }}
                  <fnf-shortcut [keys]="getShortcutsByAction(id)"></fnf-shortcut>
                </button>
              }
            }
          </mat-list>
        </div>

        <div>
          <mat-list>
            @for (id of menuItems1; track id) {
              @if (id === '-') {
                <mat-divider></mat-divider>
              } @else {

                <button
                    (click)="triggerAction(id)"
                    mat-menu-item>
                  {{ getLabelByAction(id) }}
                  <fnf-shortcut [keys]="getShortcutsByAction(id)"></fnf-shortcut>
                </button>
              }
            }
          </mat-list>
        </div>

        <div>
          <mat-list>
            @for (id of menuItems2; track id) {
              @if (id === '-') {
                <mat-divider></mat-divider>
              } @else {

                <button
                    (click)="triggerAction(id)"
                    mat-menu-item>
                  {{ getLabelByAction(id) }}
                  <fnf-shortcut [keys]="getShortcutsByAction(id)"></fnf-shortcut>
                </button>
              }
            }
          </mat-list>
        </div>

        <div>
          <mat-list>
            @for (id of menuItems3; track id) {
              @if (id === '-') {
                <mat-divider></mat-divider>
              } @else {

                <button
                    (click)="triggerAction(id)"
                    mat-menu-item>
                  {{ getLabelByAction(id) }}
                  <fnf-shortcut [keys]="getShortcutsByAction(id)"></fnf-shortcut>
                </button>
              }
            }
            <mat-divider></mat-divider>

            @for (tool of tools; track tool) {
              <button
                  mat-menu-item
                  (click)="onToolClicked(tool)">{{ tool.label }}
                <fnf-shortcut [keys]="getShortcutAsLabelTokens(tool.shortcut)"></fnf-shortcut>
              </button>
            }

          </mat-list>
        </div>

      </div>


    </mat-menu>


    <!-- Tasks -->
    <fnf-task-button
        (onClick)="openButtonSheet()"
        (onClose)="closeButtonSheet()"
        class="panel-button"></fnf-task-button>


    <button
        [matMenuTriggerFor]="menuSettings"
        class="panel-button icon-only"
        mat-stroked-button>
      <mat-icon>palette</mat-icon>
    </button>
    <mat-menu #menuSettings="matMenu">
      @for (th of themes; track th) {
        <button
            (click)="setTheme(th)"
            mat-menu-item>
          L&F {{ th }}
        </button>
      }
      <!-- TODO mat-divider></mat-divider>
      <button (click)="openCustomColors()" mat-menu-item>
        Custom Colors...
      </button-->
    </mat-menu>


    <button
        (click)="openShortcutDlg($event)"
        class="panel-button icon-only"
        mat-stroked-button>
      <mat-icon>keyboard</mat-icon>
    </button>

    <button
        (click)="onDebugClicked($event)"
        class="panel-button icon-only"
        mat-stroked-button>
      <mat-icon>bug_report</mat-icon>
    </button>


    <!--button
        [matMenuTriggerFor]="menuTools"
        class="panel-button row-reverse"
        mat-stroked-button>
      Tools
      <mat-icon>keyboard_arrow_up</mat-icon>
    </button>
    <mat-menu #menuTools="matMenu">
      @for (tool of tools; track tool) {
        <button
            mat-menu-item
            (click)="onToolClicked(tool)">{{ tool.label }}
          <fnf-shortcut [keys]="getShortcutAsLabelTokens(tool.shortcut)"></fnf-shortcut>
        </button>
      }
    </mat-menu-->

  </div>
</div>
